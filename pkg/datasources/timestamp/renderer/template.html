<div class="block-default">
    <div class="block-header">
        <span class="block-source">{{.Block.Source}}</span>
        <span class="block-separator">â€¢</span>
        <time class="block-time" datetime="{{.Block.CreatedAt.Format "2006-01-02T15:04:05Z07:00"}}">
            {{formatTime .Block.CreatedAt}}
        </time>
    </div>

    <div class="block-content">
        {{.Block.Text}}
    </div>

    {{if .Links}}
    <div class="block-links">
        {{range .Links}}
        <a href="{{.}}" target="_blank" rel="noopener" class="block-link">{{.}}</a>
        {{end}}
    </div>
    {{end}}

    {{if .Metadata}}
    <div class="block-metadata">
        <details class="metadata-details">
            <summary>Metadata</summary>
            <dl class="metadata-list">
                {{range $key, $value := .Metadata}}
                    {{if and (ne $key "source") (ne $key "dstype") $value}}
                        <dt>{{$key}}</dt>
                        <dd>{{$value}}</dd>
                    {{end}}
                {{end}}
            </dl>
        </details>
    </div>
    {{end}}
</div>

<style>
.block-default {
    margin-bottom: 1.5rem;
    padding: 1rem;
    border: 1px solid var(--border);
    border-radius: 6px;
    background: var(--surface);
    transition: background .25s ease, border-color .25s ease;
}

.block-header {
    margin-bottom: 0.75rem;
    font-size: 0.875rem;
    color: var(--text-dim);
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.block-source {
    background: var(--surface-alt);
    padding: 0.125rem 0.5rem;
    border-radius: 4px;
    font-weight: 500;
    color: var(--text);
    border: 1px solid var(--border-alt);
}

.block-separator {
    color: var(--border-alt);
}

.block-time {
    font-variant-numeric: tabular-nums;
    color: var(--text-faint);
}

.block-content {
    line-height: 1.6;
    color: var(--text);
    margin-bottom: 0.75rem;
    white-space: pre-wrap;
}

.block-links {
    margin-bottom: 0.75rem;
    padding-top: 0.5rem;
    border-top: 1px solid var(--border-alt);
}

.block-link {
    color: var(--accent);
    text-decoration: none;
    word-break: break-all;
    display: inline-block;
    margin-right: 1rem;
    margin-bottom: 0.25rem;
    transition: color .2s ease;
}

.block-link:hover {
    text-decoration: underline;
    color: var(--accent-hover);
}

.block-metadata {
    border-top: 1px solid var(--border-alt);
    padding-top: 0.75rem;
}

.metadata-details {
    font-size: 0.875rem;
}

.metadata-details summary {
    cursor: pointer;
    color: var(--text-dim);
    font-weight: 500;
    transition: color .2s ease;
}

.metadata-details summary:hover {
    color: var(--text);
}

.metadata-list {
    margin: 0.5rem 0 0 0;
    display: grid;
    grid-template-columns: auto 1fr;
    gap: 0.25rem 0.75rem;
}

.metadata-list dt {
    font-weight: 500;
    color: var(--text-dim);
    margin: 0;
}

.metadata-list dd {
    margin: 0;
    color: var(--text);
    word-break: break-word;
}
</style>
